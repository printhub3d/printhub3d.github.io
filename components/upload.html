<!-- Upload Section Component - Upgraded UI -->
<section id="upload" class="upload-section" style="background: linear-gradient(135deg, #f8fafc 0%, #e0e7ff 100%); padding: 60px 0;">
    <div class="container" style="max-width: 900px; margin: auto;">
        <div class="section-header" style="text-align: center; margin-bottom: 40px;">
            <span class="section-label" style="font-size: 14px; color: #6366f1; font-weight: 600; letter-spacing: 1px;">Upload</span>
            <h2 class="section-title" style="font-size: 2.5rem; font-weight: 800; margin: 10px 0;">
                <span>Tải File 3D</span>
                <span class="text-gradient" style="background: linear-gradient(90deg, #6366f1, #06b6d4); -webkit-background-clip: text; color: transparent;">Của Bạn</span>
            </h2>
            <p class="section-description" style="color: #64748b; font-size: 1.1rem;">
                Hỗ trợ các định dạng: <strong>STL, OBJ, PLY, 3MF, STEP</strong> (Tối đa <strong>100MB</strong>)
            </p>
        </div>

        <div class="upload-wrapper" style="background: #fff; border-radius: 24px; box-shadow: 0 8px 32px rgba(99,102,241,0.08); padding: 40px;">
            <div class="upload-container">
                <div class="upload-area" id="uploadArea" style="border: 2px dashed #6366f1; border-radius: 16px; padding: 40px 24px; text-align: center; background: #f1f5f9;">
                    <div class="upload-visual" style="margin-bottom: 24px;">
                        <div class="upload-icon-animated" style="font-size: 3rem; color: #6366f1; animation: bounce 1.5s infinite;">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <div class="upload-particles"></div>
                    </div>

                    <h3 class="upload-title" style="font-size: 1.4rem; font-weight: 700; color: #334155;">Kéo thả file vào đây</h3>
                    <p class="upload-subtitle" style="color: #64748b; margin: 8px 0;">hoặc</p>

                    <button class="btn btn-primary" id="selectFileBtn" style="background: linear-gradient(90deg, #6366f1, #06b6d4); color: #fff; border: none; border-radius: 8px; padding: 12px 28px; font-size: 1rem; font-weight: 600; box-shadow: 0 2px 8px rgba(99,102,241,0.12); transition: background 0.2s;">
                        <i class="fas fa-folder-open"></i>
                        Chọn file từ máy tính
                    </button>

                    <input type="file" id="fileInput" accept=".stl,.obj,.ply,.3mf,.step,.stp" hidden multiple>

                    <div class="upload-info" style="margin-top: 16px; color: #6366f1;">
                        <p><i class="fas fa-info-circle"></i> Hỗ trợ nhiều file cùng lúc</p>
                    </div>
                </div>

                <div class="files-list" id="filesList" style="margin: 24px 0;"></div>

                <div class="upload-config" id="uploadConfig" style="display: none; margin-top: 32px;">
                    <h3 class="config-title" style="font-size: 1.3rem; font-weight: 700; color: #334155; margin-bottom: 24px;">Cấu hình in 3D</h3>

                    <div class="config-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px;">
                        <!-- Material Selection -->
                        <div class="config-section">
                            <h4 style="color: #6366f1; font-weight: 700;"><i class="fas fa-cubes"></i> Vật liệu</h4>
                            <div class="material-options" style="display: flex; flex-direction: column; gap: 12px; margin-top: 12px;">
                                <label class="material-option" style="cursor: pointer;">
                                    <input type="radio" name="material" value="pla" checked style="margin-right: 8px;">
                                    <div class="material-card" style="display: inline-block; background: #f1f5f9; border-radius: 8px; padding: 10px 18px;">
                                        <span class="material-name" style="font-weight: 600;">PLA</span>
                                        <span class="material-desc" style="color: #64748b; margin-left: 8px;">Thân thiện môi trường</span>
                                        <span class="material-price" style="float: right; color: #6366f1; font-weight: 700;">800đ/g</span>
                                    </div>
                                </label>
                                <label class="material-option" style="cursor: pointer;">
                                    <input type="radio" name="material" value="abs" style="margin-right: 8px;">
                                    <div class="material-card" style="display: inline-block; background: #f1f5f9; border-radius: 8px; padding: 10px 18px;">
                                        <span class="material-name" style="font-weight: 600;">ABS</span>
                                        <span class="material-desc" style="color: #64748b; margin-left: 8px;">Bền, chịu nhiệt tốt</span>
                                        <span class="material-price" style="float: right; color: #6366f1; font-weight: 700;">900đ/g</span>
                                    </div>
                                </label>
                                <label class="material-option" style="cursor: pointer;">
                                    <input type="radio" name="material" value="petg" style="margin-right: 8px;">
                                    <div class="material-card" style="display: inline-block; background: #f1f5f9; border-radius: 8px; padding: 10px 18px;">
                                        <span class="material-name" style="font-weight: 600;">PETG</span>
                                        <span class="material-desc" style="color: #64748b; margin-left: 8px;">Trong suốt, bền</span>
                                        <span class="material-price" style="float: right; color: #6366f1; font-weight: 700;">1200đ/g</span>
                                    </div>
                                </label>
                                <label class="material-option" style="cursor: pointer;">
                                    <input type="radio" name="material" value="resin" style="margin-right: 8px;">
                                    <div class="material-card" style="display: inline-block; background: #f1f5f9; border-radius: 8px; padding: 10px 18px;">
                                        <span class="material-name" style="font-weight: 600;">Resin</span>
                                        <span class="material-desc" style="color: #64748b; margin-left: 8px;">Chi tiết siêu cao</span>
                                        <span class="material-price" style="float: right; color: #6366f1; font-weight: 700;">2000đ/g</span>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Color Selection -->
                        <div class="config-section">
                            <h4 style="color: #6366f1; font-weight: 700;"><i class="fas fa-palette"></i> Màu sắc</h4>
                            <div class="color-picker" style="margin-top: 12px;">
                                <div class="color-options" style="display: flex; flex-wrap: wrap; gap: 10px;">
                                    <label class="color-option" style="cursor: pointer;">
                                        <input type="radio" name="color" value="white" checked style="display: none;">
                                        <span class="color-swatch white" style="display: inline-block; width: 28px; height: 28px; border-radius: 50%; background: #fff; border: 2px solid #e5e7eb; box-shadow: 0 1px 4px rgba(0,0,0,0.06);"></span>
                                    </label>
                                    <label class="color-option" style="cursor: pointer;">
                                        <input type="radio" name="color" value="black" style="display: none;">
                                        <span class="color-swatch black" style="display: inline-block; width: 28px; height: 28px; border-radius: 50%; background: #222; border: 2px solid #e5e7eb;"></span>
                                    </label>
                                    <label class="color-option" style="cursor: pointer;">
                                        <input type="radio" name="color" value="red" style="display: none;">
                                        <span class="color-swatch red" style="display: inline-block; width: 28px; height: 28px; border-radius: 50%; background: #ef4444; border: 2px solid #e5e7eb;"></span>
                                    </label>
                                    <label class="color-option" style="cursor: pointer;">
                                        <input type="radio" name="color" value="blue" style="display: none;">
                                        <span class="color-swatch blue" style="display: inline-block; width: 28px; height: 28px; border-radius: 50%; background: #3b82f6; border: 2px solid #e5e7eb;"></span>
                                    </label>
                                    <label class="color-option" style="cursor: pointer;">
                                        <input type="radio" name="color" value="green" style="display: none;">
                                        <span class="color-swatch green" style="display: inline-block; width: 28px; height: 28px; border-radius: 50%; background: #22c55e; border: 2px solid #e5e7eb;"></span>
                                    </label>
                                    <label class="color-option" style="cursor: pointer;">
                                        <input type="radio" name="color" value="yellow" style="display: none;">
                                        <span class="color-swatch yellow" style="display: inline-block; width: 28px; height: 28px; border-radius: 50%; background: #fde047; border: 2px solid #e5e7eb;"></span>
                                    </label>
                                    <label class="color-option" style="cursor: pointer;">
                                        <input type="radio" name="color" value="orange" style="display: none;">
                                        <span class="color-swatch orange" style="display: inline-block; width: 28px; height: 28px; border-radius: 50%; background: #fb923c; border: 2px solid #e5e7eb;"></span>
                                    </label>
                                    <label class="color-option" style="cursor: pointer;">
                                        <input type="radio" name="color" value="purple" style="display: none;">
                                        <span class="color-swatch purple" style="display: inline-block; width: 28px; height: 28px; border-radius: 50%; background: #a78bfa; border: 2px solid #e5e7eb;"></span>
                                    </label>
                                </div>
                                <p class="color-note" style="color: #64748b; margin-top: 10px;">Nhiều màu khác có sẵn theo yêu cầu</p>
                            </div>
                        </div>

                        <!-- Quality Selection -->
                        <div class="config-section" style="grid-column: span 2;">
                            <h4 style="color: #6366f1; font-weight: 700;"><i class="fas fa-sliders-h"></i> Chất lượng</h4>
                            <div class="quality-slider" style="margin-top: 12px;">
                                <input type="range" id="qualitySlider" min="1" max="3" value="2" class="slider" style="width: 100%; accent-color: #6366f1;">
                                <div class="quality-labels" style="display: flex; justify-content: space-between; margin-top: 8px;">
                                    <span class="quality-label" data-quality="1" style="text-align: center;">
                                        <strong>Nháp</strong>
                                        <br><small>0.3mm</small>
                                    </span>
                                    <span class="quality-label active" data-quality="2" style="text-align: center; color: #6366f1;">
                                        <strong>Tiêu chuẩn</strong>
                                        <br><small>0.2mm</small>
                                    </span>
                                    <span class="quality-label" data-quality="3" style="text-align: center;">
                                        <strong>Cao cấp</strong>
                                        <br><small>0.1mm</small>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Scale Selection -->
                        <div class="config-section" style="grid-column: span 2;">
                            <h4 style="color: #6366f1; font-weight: 700;"><i class="fas fa-expand-arrows-alt"></i> Tỷ lệ</h4>
                            <div class="scale-control" style="margin-top: 12px; display: flex; gap: 12px;">
                                <button class="scale-btn" data-scale="0.5" style="background: #f1f5f9; border: none; border-radius: 6px; padding: 8px 18px; font-weight: 600; color: #64748b; transition: background 0.2s;">50%</button>
                                <button class="scale-btn" data-scale="0.75" style="background: #f1f5f9; border: none; border-radius: 6px; padding: 8px 18px; font-weight: 600; color: #64748b;">75%</button>
                                <button class="scale-btn active" data-scale="1" style="background: linear-gradient(90deg, #6366f1, #06b6d4); color: #fff; border: none; border-radius: 6px; padding: 8px 18px; font-weight: 600;">100%</button>
                                <button class="scale-btn" data-scale="1.25" style="background: #f1f5f9; border: none; border-radius: 6px; padding: 8px 18px; font-weight: 600; color: #64748b;">125%</button>
                                <button class="scale-btn" data-scale="1.5" style="background: #f1f5f9; border: none; border-radius: 6px; padding: 8px 18px; font-weight: 600; color: #64748b;">150%</button>
                            </div>
                        </div>
                    </div>

                    <!-- Price Calculator -->
                    <div class="price-calculator" style="margin-top: 32px; background: #f1f5f9; border-radius: 16px; padding: 24px;">
                        <div class="calculator-header" style="display: flex; align-items: center; justify-content: space-between;">
                            <h4 style="color: #6366f1; font-weight: 700;"><i class="fas fa-calculator"></i> Ước tính chi phí</h4>
                            <button class="refresh-btn" id="refreshPrice" style="background: none; border: none; color: #6366f1; font-size: 1.2rem; cursor: pointer;">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>

                        <div class="price-details" style="margin-top: 16px;">
                            <div class="price-row" style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span class="price-label" style="color: #64748b;">Thời gian in:</span>
                                <span class="price-value" id="printTime" style="font-weight: 600;">~4 giờ</span>
                            </div>
                            <div class="price-row" style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span class="price-label" style="color: #64748b;">Vật liệu sử dụng:</span>
                                <span class="price-value" id="materialUsage" style="font-weight: 600;">~50g</span>
                            </div>
                            <div class="price-row" style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span class="price-label" style="color: #64748b;">Chi phí vật liệu:</span>
                                <span class="price-value" id="materialCost" style="font-weight: 600;">40,000 VNĐ</span>
                            </div>
                            <div class="price-row" style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span class="price-label" style="color: #64748b;">Phí dịch vụ:</span>
                                <span class="price-value" id="serviceFee" style="font-weight: 600;">60,000 VNĐ</span>
                            </div>
                            <div class="price-row total" style="display: flex; justify-content: space-between; font-size: 1.2rem; font-weight: 700; color: #6366f1; margin-top: 12px;">
                                <span class="price-label">Tổng cộng:</span>
                                <span class="price-value" id="totalCost">100,000 VNĐ</span>
                            </div>
                        </div>

                        <div class="price-note" style="margin-top: 12px; color: #64748b;">
                            <i class="fas fa-info-circle"></i>
                            <span>Giá trên chưa bao gồm VAT và phí vận chuyển</span>
                        </div>
                    </div>

                    <div class="upload-actions" style="margin-top: 32px; display: flex; gap: 16px; justify-content: flex-end;">
                        <button class="btn btn-secondary" id="cancelUpload" style="background: #f1f5f9; color: #6366f1; border: none; border-radius: 8px; padding: 12px 28px; font-weight: 600;">
                            <i class="fas fa-times"></i>
                            Hủy bỏ
                        </button>
                        <button class="btn btn-primary btn-submit" id="submitOrder" style="background: linear-gradient(90deg, #6366f1, #06b6d4); color: #fff; border: none; border-radius: 8px; padding: 12px 28px; font-weight: 600;">
                            <i class="fas fa-shopping-cart"></i>
                            Đặt hàng ngay
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <style>
        @keyframes bounce {
            0%, 100% { transform: translateY(0);}
            50% { transform: translateY(-10px);}
        }
        .scale-btn.active, .scale-btn:hover {
            background: linear-gradient(90deg, #6366f1, #06b6d4) !important;
            color: #fff !important;
        }
        .color-option input:checked + .color-swatch {
            border: 2px solid #6366f1 !important;
            box-shadow: 0 0 0 2px #6366f133;
        }
        .material-option input:checked + .material-card {
            background: linear-gradient(90deg, #6366f111, #06b6d411);
            border: 2px solid #6366f1;
        }
        .btn:active { transform: scale(0.98);}
        @media (max-width: 900px) {
            .config-grid { grid-template-columns: 1fr !important; }
        }
    </style>
</section>